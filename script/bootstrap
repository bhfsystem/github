#!/usr/bin/env bash

function bootstrap {
  local shome="$(cd -P -- "$(dirname -- "$BASH_SOURCE")/.." && pwd -P)"
  source "$shome/script/profile"

  app compile bundler
  ln -nfs ../vendor/bundle/bin/ghi bin/

  git clone "git@github.com:github/hub" "$shome/vendor/hub" || true
  pushd "$shome/vendor/hub"
  script/build
  popd
  ln -nfs "../vendor/hub/bin/hub" "$shome/bin/hub"

  git clone "git@github.com:petervanderdoes/gitflow-avh" "$shome/vendor/gitflow" || true
  pushd "$shome/vendor/gitflow"
  make prefix="$shome" install
  popd
}

bootstrap
